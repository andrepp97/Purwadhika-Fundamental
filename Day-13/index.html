<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Comfortaa:600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <title>Form Gue</title>

  <style>
    .namaBro {
      background: rgb(31, 31, 34);
      color: white;
    }

    .namaBro:hover {
      cursor: pointer;
      background: rgb(72, 118, 204);
    }
  </style>
</head>

<body style="font-family: 'Comfortaa', cursive;">

  <form class="container border mt-3 p-4" id="formInput">
    <h3 style="text-align: center">Input Data</h3>
    <div class="row">
      <div class="col-12">
        <label>Name</label>
        <input id="nama" type="text" class="form-control"><br>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <label>Age</label>
        <input id="usia" class="form-control" type="number">
      </div>
      <div class="col-6">
        <label>Job</label>
        <input id="pekerjaan" class="form-control" type="text">
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-12 ">
        <input type="button" value="ADD DATA" onclick="addData()" class="btn btn-block btn-success">
      </div>
    </div>
  </form>

  <form>
    <div class="container border mt-5 p-4 text-center">
      <h3>Filter</h3>
      <div class="row justify-content-center text-center">
        <input id="filter-name" placeholder="Filter by name" type="text" class="form-control col-3 m-2">
        <input id="filter-age" placeholder="Filter by age" type="text" class="form-control col-3 m-2">
        <input id="filter-job" placeholder="Filter by job" type="text" class="form-control col-3 m-2">
      </div>
<br>
      <input type="button" value="FILTER" onclick="filterData()" class="btn btn-primary">
    </div>
  </form>

  <div class="container mt-5 text-center">
    <h3>Data</h3>
    <table class="table-bordered table mt-3">
      <thead class="thead-dark">
        <tr>
          <td class="namaBro" onclick="sortByName()">Name</td>
          <th>Age</th>
          <th>Job</th>
        </tr>
      </thead>
      <tbody>

      </tbody>
    </table>
  </div>


  <!-- Javascript -->
  <script>
    class Person {
      constructor(nama, umur, pekerjaan) {
        this.nama = nama,
          this.umur = umur,
          this.pekerjaan = pekerjaan
      }
    }

    var data = [
      new Person('Jainal', '23', 'Student'),
      new Person('Andre', '22', 'Big boss'),
      new Person('Max', '43', 'Cogan'),
      new Person('Nancy', '33', 'Ndasmu')
    ]

    addData = () => {
      let xNama = document.getElementById('nama').value
      let xUsia = document.getElementById('usia').value
      let xJob = document.getElementById('pekerjaan').value

      if (xNama == '' || xUsia == '' || xJob == '') {
        alert('Input yg bener ajg!')
      } else {
        let newMan = new Person(xNama, xUsia, xJob)
        data.push(newMan)
        showData(data)
        document.getElementById("formInput").reset();
        stat = 0
      }
    }

    function showData(arr) {
      var hasil = ''
      for (var i = 0; i < arr.length; i++) {
        hasil += `<tr>
                        <td>${arr[i].nama}</td>
                        <td>${arr[i].umur}</td>
                        <td>${arr[i].pekerjaan}</td>
                        </tr>`
      }
      document.getElementsByTagName('tbody')[0].innerHTML = hasil
    }

    function filterData() {
      var fName = document.getElementById('filter-name').value
      var fAge = document.getElementById('filter-age').value
      var fJob = document.getElementById('filter-job').value
      var tempData = []

      for (var i = 0; i < data.length; i++) {
        if (data[i].nama.includes(fName) && data[i].umur.startsWith(fAge) && data[i].pekerjaan.includes(fJob)) {
          tempData.push(data[i])
        }
      }
      showData(tempData)
    }

    var stat = 0

    function sortByName() {
      var tempData = data

      if (stat == 0) {
        for (let i = tempData.length - 1; i > 0; i--) {
          for (let j = 0; j < i; j++) {
            if (tempData[j].nama > tempData[j + 1].nama) {
              const temp = tempData[j]
              tempData[j] = tempData[j + 1]
              tempData[j + 1] = temp
            }
          }
        }
        stat = 1
      } else if (stat == 1) {
        tempData.reverse()
        stat = 0
      }

      showData(tempData)
    }

    showData(data)
  </script>
</body>

</html>